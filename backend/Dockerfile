FROM node:20-alpine

WORKDIR /app

RUN corepack enable

COPY package.json pnpm-lock.yaml ./


RUN pnpm install --frozen-lockfile


COPY . .

RUN pnpm run build

ENV NODE_ENV=production
EXPOSE 5000

CMD ["pnpm", "start"]